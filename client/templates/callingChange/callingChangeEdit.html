<template name="callingChangeEdit">

  {{#if userCanEditCallingChange}}
    {{#with callingChangeData}}

      <div class="bar bar-header bar-light">
        {{> barHeaderLeft leftType="cancel"}}

        {{> barHeaderTitle title="Edit Calling Change"}}
        <div class="buttons">
          <a id="doneButton" class="button button-clear pull-right button-positive">
            <strong>Done</strong>
          </a>
        </div>
      </div>

      {{#ionView}}
        {{#ionContent}}
          {{#ionList}}
            <div class="item item-divider">
              &nbsp;
            </div>
            <a class="item item-icon-right" href="{{pathFor 'callingChangeTypeSelect'}}">
              Type
              <span class="item-note">{{{callingChangeTypeSession}}}</span>
              <i class="icon ion-ios-arrow-right"></i>
            </a>
            <a id="callingChangeMemberItem" class="item item-icon-right" href="{{pathFor 'memberSelect'}}">
              Member Name
              <span class="item-note">{{callingChangeMemberSession.switchedPreferredName}}</span>
              <i class="icon ion-ios-arrow-right"></i>
            </a>
            <a class="item item-icon-right" href="{{pathFor 'callingSelect'}}">
              Calling Name
              <span class="item-note">{{{callingChangeCallingSession}}}</span>
              <i class="icon ion-ios-arrow-right"></i>
            </a>
            <div class="item item-divider">
              &nbsp;
            </div>
            <label class="item">
              <textarea id="notes" placeholder="Notes" rows="3">{{notes}}</textarea>
            </label>

            <div class="item item-divider">
              &nbsp;
            </div>
            <label class="item">
              Status
              <span class="item-note">{{status}}</span>
            </label>
            <a class="item item-icon-right" href="/member/{{callingChangeMemberSession.individualId}}">
              View Member
              <i class="icon ion-ios-arrow-right"></i>
            </a>

            {{#if isInterviewed status}}
              <a id="meetingItem" class="item item-icon-right" href="{{pathFor 'meetingSelect'}}">
                Meeting
                <span class="item-note">{{{meeting.meetingDate}}}</span>
                <i class="icon ion-ios-arrow-right"></i>
              </a>
            {{/if}}

            {{#if isPresented status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a id="meetingItem" class="item item-icon-right" href="{{pathFor 'meetingSelect'}}">
                Meeting
                <span class="item-note">{{{meeting.meetingDate}}}</span>
                <i class="icon ion-ios-arrow-right"></i>
              </a>
            {{/if}}

            {{#if isDiscussed status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a class="button button-positive button-full button-clear" data-action="markApproved">
                Mark Approved
              </a>
            {{/if}}

            {{#if isApproved status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a class="button button-positive button-full button-clear" data-action="markInterviewed">
                Mark Interviewed
              </a>
            {{/if}}

            {{#if isInterviewed status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a class="button button-positive button-full button-clear" data-action="markPresented">
                Mark Presented
              </a>
            {{/if}}

            {{#if isPresented status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a class="button button-positive button-full button-clear" data-action="markRecorded">
                Mark Recorded
              </a>
            {{/if}}

            {{#if isRecorded status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a class="button button-positive button-full button-clear" data-action="markSetApart">
                Mark Set Apart
              </a>
            {{/if}}

            {{#if isSetApart status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a class="button button-positive button-full button-clear" data-action="markSetApartRecorded">
                Mark Set Apart Recorded
              </a>
            {{/if}}

            {{#if isNotCanceled status}}
              <div class="item item-divider">
                &nbsp;
              </div>
              <a class="button button-positive button-full button-clear" data-action="showCancelActionSheet">
                Mark Canceled
              </a>
            {{/if}}

            <div class="item item-divider">
              &nbsp;
            </div>
            <a class="button button-positive button-full button-clear" data-action="showDeleteActionSheet">
              Delete Calling Change
            </a>
            <div class="item item-divider">
              &nbsp;
            </div>
          {{/ionList}}
        {{/ionContent}}
      {{/ionView}}
    {{/with}}
  {{else}}
    {{> notAllowed title="Edit Calling Change"}}
  {{/if}}

</template>
